<!doctype html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport'
          content='width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0'>
    <meta http-equiv='X-UA-Compatible' content='ie=edge'>
    <link href='#' rel='shortcut icon' />
    <script src='https://code.jquery.com/jquery-3.6.1.min.js'></script>
    <title>index</title>
    <style>
        table {
            border          : 3px solid #00664d;
            border-collapse : collapse;
            text-align      : center;
        }

        th, td {
            border : 1px solid #00664d;
            width  : 8em;
        }

        td:last-child {
            font-weight : bold;
            color       : #880088;
        }

        input {
            width      : 3em;
            text-align : center;
        }
    </style>
</head>
<body>

<table>
    <tr>
        <th>单价</th>
        <th>数量</th>
        <th>总价</th>
    </tr>
    <tr>
        <td class='price'>¥1.20</td>
        <td>
            <button class='decrement'>-</button>
            <input type='text' value='1'>
            <button class='increment'>+</button>
        </td>
        <td class='sum'>¥1.20</td>
    </tr>
    <tr>
        <td class='price'>¥1.47</td>
        <td>
            <button class='decrement'>-</button>
            <input type='text' value='1'>
            <button class='increment'>+</button>
        </td>
        <td class='sum'>¥1.47</td>
    </tr>
</table>

<script>
  $(function () {
      /* 输入框内容改变
       * 更新总价 */
    $('input').change(function () {
      let price = $(this).parent().siblings('.price').html().substring(1)
      let num = $(this).val()
      $(this).parent().siblings('.sum').html(`¥${ (price * num).toFixed(2) }`)
    })

      /* 自减
       * 触发改变事件 */
    $('.decrement').click(function () {
      let val = $(this).siblings('input').val()
      // val 是字符串
      if (val == 1) {
        return false
      }
      $(this).siblings('input').val(--val)
      $(this).siblings('input').change()
    })

      /* 自增 */
    $('.increment').click(function () {
      let val = $(this).siblings('input').val()
      $(this).siblings('input').val(++val)
      $(this).siblings('input').change()
    })
  })
</script>
</body>
</html>
