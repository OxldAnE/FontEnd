<!doctype html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport'
          content='width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0'>
    <meta http-equiv='X-UA-Compatible' content='ie=edge'>
    <link href='#' rel='shortcut icon' />
    <title>index</title>
</head>
<body>

<button>提交</button>

<script>
  const B = document.querySelector('button')
  let i = 0

  function f () {
    console.log(i++)
  }

  /* 点击事件共享定时器
   * 没有任务时，添加定时器，任务执行完，定时器置空 */
  function g (f, s) {
    let timer
    return function () {
      if (timer) {
        return
      }
      timer = setTimeout(() => {
        f()
        timer = null
      }, s)
    }
  }

  B.addEventListener('click', g(f, 500))
</script>
</body>
</html>
